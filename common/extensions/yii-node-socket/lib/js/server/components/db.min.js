var db={cm:null,_dbOptions:{},_driver:null,_createDriver:function(){var a=require("./db/"+this._dbOptions.driver+"/connector.js");if(a.init(this._dbOptions)){this._driver=a;return true}return false},_setUp:function(){var a=this;var c=10;var b=function(d){};this.getDriver().channel.count(function(g,f){if(!g){var e=Math.ceil(f/c);var h=0;var d=function(){if(e==0){return}a.getDriver().channel.get(function(i,j){if(!i){b(j,function(){h+=c;e--;process.nextTick(function(){d()})})}},{},h,c)};d()}})},onComponentMangerSet:function(){var a=this;this.cm.on("init.completed",function(){a._setUp()})},init:function(a){this._dbOptions=a},getDriver:function(){if(!this._driver){this._createDriver()}return this._driver}};module.exports=db;