jQuery.prepare=function(a){if(isNaN(parseFloat(a))){return(0).toFixed(2)}a=Math.floor(parseFloat((100*a)))/100;return a.toFixed(2)};Array.prototype.in_array=function(a){try{for(var c=0,b=this.length;c<b;c++){if(this[c]==a){return true}}return false}catch(d){console.log(d);return false}};window.onerror=function(g,e,b,d,c){var a=!d?"":"\ncolumn: "+d;a+=!c?"":"\nerror: "+c;DEBUG(_d,"error","Global",{msg:g,url:e,line:b,extra:a});var f=true;return f};function elementFocus(b,a){$(b).scrollTo($(a),1000)}function reload(){window.href.reload()}function closeModal(){$(".modal-backdrop").remove();$(".modal").modal("hide")}function openCustom(){closeModal();setTimeout(function(){$("#customModal").modal("show")},600)}function removeElement(a){$(a).remove()}function clearForm(){$("form .clear").val("")}function updatePage(b,c,a){$ajax.send(b,c,null,null,a)}function updateGrid(a,c,d){if(c===undefined){c={}}if(d===undefined){d=function(){}}var b=$("#"+a);$.fn.yiiGridView.update(a,{data:c,complete:function(){b.removeClass("grid-view-loading");d()}})}$(function(){fixedTableHead();$(document.body).on("touchstart click",".mass-select",function(){var b=$(this);var a=$(""+b.data("selector")+"");if(!b.closest(".mass-block").find(".mass-select:checked").length){a.find("a").addClass("disabled");return}a.find("a").removeClass("disabled")});$(document.body).on("touchstart click",".mass-all-select",function(){var b=$(this);var a=$(""+b.data("selector")+"");if(!b.is(":checked")){b.closest(".mass-block").find(".mass-select").prop("checked",false);a.find("a").addClass("disabled");return}b.closest(".mass-block").find(".mass-select").prop("checked",true);a.find("a").removeClass("disabled")});$(document.body).on("touchstart click",".spoiler-block .spoiler-text",function(){$(this).closest(".spoiler-block").find(".spoiler-hidden").toggle()});$(document.body).on("focus",".datepicker",function(){$(this).datepicker({language:"ru",dateFormat:"dd.mm.yy",autoclose:true,todayBtn:"linked"})});$(document.body).on("keypress",".double",function(d){var g=$(this);var h=g.val();var b=d||window.event;var j=b.keyCode||b.which;j=String.fromCharCode(j);if(j.length==0){return}var f=/^[0-9.,\b]+$/;var a=/[.,]/g;var i=(j==","&&a.test(h))||(j=="."&&a.test(h));var c=h.length==0&&(j==","||j==".");if(!f.test(j)||i||c){b.returnValue=false;if(b.preventDefault){b.preventDefault()}}});$(document.body).on("keypress",".numbers",function(c){var f=$(this);var d=c||window.event;var a=d.keyCode||d.which;a=String.fromCharCode(a);if(a.length==0){return}var b=/^[0-9\b]+$/;if(!b.test(a)){d.returnValue=false;if(d.preventDefault){d.preventDefault()}}});$(document.body).on("touchstart click",".nav-bar-panel #balance a.bl:not(.label-active)",function(){var a=$(this);var b=function(c){if(c.balance!==undefined){$user.updateBalance(c.balance)}};$ajax.send(a.data("link"),null,null,null,null,null,null,b);a.blur()});$(document.body).on("mouseover",'[data-toggle="popover"]',function(){$(this).popover("show")});$(document.body).on("mouseover",'[data-toggle="tooltip"]',function(){$(this).tooltip("show")});$(document.body).on("mouseover",".editable",function(){var a=$(this);a.editable({send:"always",params:{YII_CSRF_TOKEN:$ajax.getCSRF()},ajaxOptions:{dataType:"json"},success:function(c,b){$ajax.checkResponse(c);if(c.errors){return false}}})});$(window).on("page:loaded",function(){$.fn.iScroll("removeAll");$(".pager-infinity").iScroll({loader:'<div class="page-loader"><div class="loader"></div></div>',dataType:"json",afterSend:function(b,c){var a=$("#"+c.data("to"));if(b.replaceList!==undefined){$.each(b.replaceList,function(d,e){a.append(e.view)})}}})});$(window).on("page:loaded",function(){elementFocus("html","body");$.each($(".select2-tag"),function(a,b){console.log($(b).data("select2"));if($(b).data("select2")===undefined){$(b).select2({tags:true})}});$.each($(".select2-simple"),function(a,b){console.log($(b).data("select2"));if($(b).data("select2")===undefined){$(b).select2()}});$.each($(".select2-remote"),function(a,b){console.log($(b).data("select2"));if($(b).data("select2")===undefined){select2Remote($(b),$(b).data("link"))}})});$(window).trigger("page:loaded")});function doubleNumeric(b){var d="0.00";var a="100.00";var c=$(b);if(c.length==0){return}$.each(c,function(f,g){var e=$(g);if(e.data("min")!==undefined&&e.data("min")!==null){d=e.data("min")}if(e.data("max")!==undefined&&e.data("max")!==null){a=e.data("max")}var h=parseFloat(e.val());if(isNaN(h)||h<d){e.val(d)}e.autoNumeric("init",{vMin:d,vMax:a,aSep:"",wEmpty:d})})}function numeric(b){var d="0";var a="10000000";var c=$(b);if(c.length==0){return}if(c.data("min")!==undefined&&c.data("min")!==null){d=c.data("min")}if(c.data("max")!==undefined&&c.data("max")!==null){a=c.data("max")}var e=parseInt(c.val());if(isNaN(e)||e<d){c.val(d)}c.autoNumeric("init",{vMin:d,vMax:a,aSep:"",wEmpty:d})}function elementTrigger(a,b){$(a).trigger(b)}function select2(){var a=$(".select2");$.each(a,function(b,c){if($(c).data("select2")===undefined){$(c).select2()}})}function select2tag(){var a=$(".select2-tag");$.each(a,function(b,c){if($(c).data("select2")===undefined){$(c).select2({tags:true})}})}function select2Remote(b,a){b.select2({ajax:{url:a,dataType:"json",delay:250,data:function(c){return{q:c.term,page:c.page}},processResults:function(d,c){return{results:d.items}},cache:true},escapeMarkup:function(c){return c},minimumInputLength:3,templateResult:formatRepo,templateSelection:formatRepoSelection})}function formatRepo(a){return a.label}function formatRepoSelection(a){return a.label}function loaderLine(a,b){var c=$('[data-event-for="line-'+b+'"]');c.attr("data-load",true).attr("data-type",false);c.click(function(d){d.preventDefault();var f=$(this);$('[data-event-in="'+f.data("event-for")+'"]').toggle()})}function fixedTableHead(a){if(a===undefined){a=".head-sticker"}}function DEBUG(d,a){if(_d){console.log(d)}if(d&&typeof console==="object"&&(typeof a==="object"||typeof console[a]==="function")){if(typeof a==="object"){var c=[];for(var b in a){if(typeof console[b]==="function"){c=(a[b].length)?a[b]:[a[b]];console[b].apply(console,c)}else{console.log.apply(console,c)}}}else{console[a].apply(console,Array.prototype.slice.call(arguments,2))}}};